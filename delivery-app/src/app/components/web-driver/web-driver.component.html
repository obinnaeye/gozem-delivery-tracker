<div class="main">
  <h2>Driver Dashboard</h2>
  <div class="input-row">
    <input
      data-testid="delivery-id-input"
      [(ngModel)]="deliveryId"
      placeholder="Enter Delivery ID"
    />
    <button data-testid="submit-btn" (click)="loadDelivery()">
      Load Delivery
    </button>
  </div>

  <div class="container-row" *ngIf="delivery">
    <div class="details-container" data-testid="delivery-details">
      <h3>Delivery Details</h3>
      <p *ngIf="package" data-testid="package-description">
        <span class="bold">Package Description: </span>{{ package.description }}
      </p>
      <p data-testid="delivery-status">
        <span class="bold">Status: </span>{{ delivery.status }}
      </p>
      <p *ngIf="delivery.pickup_time">
        <span class="bold">Pick Up Time: </span>{{ delivery.pickup_time }}
      </p>
      <p *ngIf="delivery.start_time">
        <span class="bold">Start Time: </span>{{ delivery.start_time }}
      </p>
      <p *ngIf="delivery.end_time">
        <span class="bold">End Time: </span>{{ delivery.end_time }}
      </p>
    </div>

    <div class="map-container">
      <div id="map" style="width: 100%; height: 400px"></div>
    </div>
    <div class="button-container">
      <button
        data-testid="picked-up-button"
        [disabled]="delivery.status !== 'open'"
        (click)="changeStatus('picked-up')"
      >
        Picked Up
      </button>
      <button
        data-testid="in-transit-button"
        [disabled]="delivery.status !== 'picked-up'"
        (click)="changeStatus('in-transit')"
      >
        In Transit
      </button>
      <button
        [disabled]="delivery.status !== 'in-transit'"
        (click)="changeStatus('delivered')"
        data-testid="delivered-button"
      >
        Delivered
      </button>
      <button
        [disabled]="delivery.status !== 'in-transit'"
        (click)="changeStatus('failed')"
        data-testid="failed-button"
      >
        Failed
      </button>
    </div>
  </div>
</div>
